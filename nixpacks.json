{
  "providers": [],
  "buildImage": "ghcr.io/railwayapp/nixpacks:latest",
  "phases": {
    "setup": {
      "nixPkgs": ["nodejs_20"],
      "nixLibs": [],
      "aptPkgs": ["postgresql-client"]
    },
    "install": {
      "cmds": [
        "cd backend && npm ci --omit=dev"
      ]
    },
    "build": {
      "cmds": [
        "cd backend && npx prisma generate"
      ]
    }
  },
  "start": {
    "cmd": "cd backend && npx prisma db push --accept-data-loss && node src/server.js"
  }
}
